!function(e,n,t){"use strict";const a="production"===process.env.NODE_ENV?"https://werelease.app":"http://localhost:3000",r=(process.env.NODE_ENV,`${a}/api/sdk`),s={ANONYMOUS_ID:"wrls.anonymous_id",BANNER_DISMISSED:"wrls.banner_dismissed",FEEDBACK_SUBMITTED:"wrls.feedback_submitted"},o={showDismissButton:!0,makeBannerClickable:!0,dismissFeedbackModal:!0,feedbackType:"both",styles:{},className:"",onBannerClick:void 0},i={id:1,title:"Test",subtitle:"Test",version:"1.0.0",tags:"Test",description:"Test",releaseDate:"2025-01-01",metaData:{test:"test"}};class l{async init(e,n){try{const t=await this.axiosInstance.post(`/projects/${e}/init`,{anonymousId:n});return 200!==t.status&&console.warn("[WeRelease] Failed to init"),t.data}catch(e){return console.error("[WeRelease] Failed to init:",e),null}}async fetchProjectDetails(e){if(!e)return console.warn("[WeRelease] No project ID provided"),null;try{const n=await this.axiosInstance.get(`/projects/${e}`);return 200!==n.status?(console.warn("[WeRelease] No published changelog found"),null):n.data}catch(e){return console.error("[WeRelease] Failed to fetch project:",e),null}}async fetchLatest(e){if(!e)return console.warn("[WeRelease] No project ID provided"),null;try{const n=await this.axiosInstance.get(`/projects/${e}/changelog?latest=true`);return 200!==n.status?(console.warn("[WeRelease] No published changelog found"),null):n.data}catch(e){return console.error("[WeRelease] Failed to fetch changelog:",e),null}}async identifyUser(e,n,t){try{200!==(await this.axiosInstance.post(`/projects/${e}/users/identify`,{user:t,projectId:e,anonymousId:n})).status&&console.warn("[WeRelease] Failed to identify user")}catch(e){console.error("[WeRelease] Error identifying user:",e)}}async submitFeedback(e){try{200!==(await this.axiosInstance.post(`/projects/${e.projectId}/feedback`,{...e,meta:{...e.meta,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,device:this.getDeviceInfo(),browser:this.getBrowserInfo(),os:this.getOSInfo(),pageUrl:window.location.href,referrer:document.referrer,screenSize:`${window.innerWidth}x${window.innerHeight}`,userAgent:navigator.userAgent}})).status&&console.warn("[WeRelease] Failed to submit feedback")}catch(e){console.error("[WeRelease] Error submitting feedback:",e)}}getDeviceInfo(){const e=navigator.userAgent;return/Mobile|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)?/iPad/i.test(e)?"Tablet":"Mobile":"Desktop"}getBrowserInfo(){const e=navigator.userAgent;return e.includes("Chrome")&&!e.includes("Edg")?"Chrome":e.includes("Safari")&&!e.includes("Chrome")?"Safari":e.includes("Firefox")?"Firefox":e.includes("Edg")?"Edge":e.includes("Opera")||e.includes("OPR")?"Opera":"Unknown"}getOSInfo(){const e=navigator.userAgent;return e.includes("Windows")?"Windows":e.includes("Mac OS")?"macOS":e.includes("Linux")?"Linux":e.includes("Android")?"Android":e.includes("iPhone")||e.includes("iPad")?"iOS":"Unknown"}constructor(){this.axiosInstance=t.create({baseURL:r,timeout:1e4,headers:{"Content-Type":"application/json"}})}}class d{getAnonymousId(){try{return localStorage.getItem(s.ANONYMOUS_ID)}catch(e){return console.warn("[WeRelease] Failed to access localStorage:",e),null}}setAnonymousId(e){try{localStorage.setItem(s.ANONYMOUS_ID,e)}catch(e){console.warn("[WeRelease] Failed to set anonymous ID:",e)}}isBannerDismissed(){try{return null!==localStorage.getItem(s.BANNER_DISMISSED)}catch(e){return console.warn("[WeRelease] Failed to check banner dismissed state:",e),!1}}setBannerDismissed(){try{localStorage.setItem(s.BANNER_DISMISSED,Date.now().toString())}catch(e){console.warn("[WeRelease] Failed to set banner dismissed:",e)}}getItem(e){try{return localStorage.getItem(e)}catch(e){return console.warn("[WeRelease] Failed to get item from storage:",e),null}}setItem(e,n){try{localStorage.setItem(e,n)}catch(e){console.warn("[WeRelease] Failed to set item in storage:",e)}}removeItem(e){localStorage.removeItem(e)}clear(){try{Object.values(s).forEach(e=>{localStorage.removeItem(e)})}catch(e){console.warn("[WeRelease] Failed to clear storage:",e)}}}function c(){const e=new d;let n=e.getAnonymousId();return n||(n="anon_"+Math.random().toString(36).substr(2,9)+"_"+Date.now(),e.setAnonymousId(n)),n}function p(e){if(!e)return"";try{const t=new Date(e);if(!n.isValid(t))return"";const a=n.differenceInDays(new Date,t);if(0===a)return"Today";if(1===a)return"Yesterday";if(a<7)return`${a} days ago`;if(a<30){const e=Math.floor(a/7);return`${e} week${1!==e?"s":""} ago`}return n.format(t,"MMM d")}catch(e){return console.warn("[WeRelease] Failed to format release date:",e),""}}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function b(e,n){e.classList.add(n)}class g{render(e){this.currentBanner&&this.destroy(this.currentBanner);const n=document.createElement("div");return n.id="werelease-banner","premium"===e.theme?this.renderPremiumBanner(n,e):this.renderBasicBanner(n,e),function(e,n){const t="string"==typeof n?document.querySelector(n):n;t?t.appendChild(e):console.warn("[WeRelease] Target element not found:",n)}(n,e.target),this.currentBanner=n,n}update(e,n){const t=this.getBannerConfig(e);t&&(t.changelogData=n,this.render(t))}destroy(e){e&&e.parentNode&&(h(e),this.currentBanner=null)}renderBasicBanner(e,n){const t=(e=>`<span class="werelease-banner-text">🎉 <strong>New features just dropped!</strong> See what's new and give us your feedback</span> <a href='${e}' target='_blank' style='color: #0066cc; text-decoration: underline;'>🚀 Explore Now</a>`)(`${a}/changelog/${n.projectId}`);e.innerHTML=t,(e=>{e.style.padding="12px 16px",e.style.margin="0",e.style.border="1px solid #ddd",e.style.backgroundColor="#f9f9f9",e.style.color="#333",e.style.fontSize="14px",e.style.fontFamily="Arial, sans-serif",e.style.lineHeight="1.4";const n=document.createElement("style");n.textContent="\n    @media (max-width: 640px) {\n      #werelease-banner {\n        display: flex !important;\n        flex-direction: column !important;\n        gap: 8px !important;\n      }\n      \n      #werelease-banner .werelease-banner-text {\n        display: block !important;\n      }\n      \n      #werelease-banner a {\n        display: block !important;\n        align-self: flex-start !important;\n      }\n    }\n  ",document.querySelector("#werelease-basic-banner-styles")||(n.id="werelease-basic-banner-styles",document.head.appendChild(n))})(e),n.options.className&&b(e,n.options.className)}renderPremiumBanner(e,n){const t=(e=>{const{showDismissButton:n=!0,makeBannerClickable:t=!0,releaseTime:a="",changelog:r={}}=e,{title:s="New Release Available",subtitle:o="",version:i="",tags:l=""}=r;return`\n    <div style="position: relative;">\n      <div class="werelease-banner-content" style="display: flex; align-items: flex-start; gap: 16px; cursor: pointer; padding: 20px;" ${t?'data-clickable="true"':""}>\n        \n        \x3c!-- Icon and NEW badge --\x3e\n        <div style="\n          width: 48px; \n          height: 48px; \n          background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 24px;\n          flex-shrink: 0;\n          position: relative;\n        ">\n          🚀\n          ${a?'\n            <span style="\n              position: absolute;\n              top: -6px;\n              right: -6px;\n              background: #ef4444;\n              color: white;\n              font-size: 10px;\n              font-weight: 700;\n              padding: 3px 6px;\n              border-radius: 10px;\n              line-height: 1;\n              text-transform: uppercase;\n              letter-spacing: 0.5px;\n              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n            ">NEW</span>\n          ':""}\n        </div>\n        \n        \x3c!-- Main content area --\x3e\n        <div style="flex: 1; min-width: 0;">\n          \x3c!-- 1st row: Title with version number --\x3e\n          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">\n            <span style="font-weight: 700; color: inherit; font-size: 16px;">${s}</span>\n            ${i?`<span style="font-size: 11px; color:#a7a7a7; background: #83899245; padding: 3px 8px; border-radius: 12px; font-weight: 600;">${i}</span>`:""}\n          </div>\n          \n          \x3c!-- 2nd row: Subtitle --\x3e\n          ${o?`\n            <div style="margin-bottom: 8px;">\n              <span style="font-size: 13px; color: #6b7280; opacity: 0.8;">${o}</span>\n            </div>\n          `:""}\n          \n          \x3c!-- 3rd row: Release date as "3 days ago" and tags --\x3e\n          ${a?`\n            <div style="margin-bottom: 12px; display: flex; align-items: center; gap: 8px; flex-direction: row; flex-wrap: wrap;">\n              <span style="\n                font-size: 12px;\n                color: #9ca3af;\n                background: rgba(156, 163, 175, 0.1);\n                padding: 4px 8px;\n                border-radius: 12px;\n                font-weight: 500;\n              ">${a}</span>\n              ${l?l.split(",").map(e=>`\n                    <span style="font-size: 11px; color: #6b7280; background: rgba(107, 114, 128, 0.1); padding: 3px 8px; border-radius: 12px;">${e.trim()}</span>\n                  `).join(""):""}\n            </div>\n          `:""}\n        </div>\n        \n        \x3c!-- Action buttons --\x3e\n        <div style="display: flex; flex-direction: row; gap: 8px; flex-shrink: 0; align-items: center;">\n          <a href="#" class="werelease-view-changes" style="\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            text-decoration: none;\n            padding: 10px 20px;\n            border-radius: 20px;\n            font-size: 14px;\n            font-weight: 600;\n            transition: all 0.2s ease;\n            border: none;\n            cursor: pointer;\n            white-space: nowrap;\n            text-align: center;\n            display: block;\n            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);\n          " onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 12px rgba(102, 126, 234, 0.4)';" \n             onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(102, 126, 234, 0.3)';">\n            View Changes\n          </a>\n          ${n?'\n            <button class="werelease-dismiss-banner" style="\n              background: rgba(107, 114, 128, 0.1);\n              color: #6b7280;\n              text-decoration: none;\n              padding: 8px 16px;\n              border: 1px solid rgba(107, 114, 128, 0.2);\n              border-radius: 20px;\n              font-size: 13px;\n              font-weight: 500;\n              cursor: pointer;\n              white-space: nowrap;\n              text-align: center;\n              transition: all 0.2s ease;\n            " onmouseover="this.style.background=\'rgba(107, 114, 128, 0.2)\'" \n               onmouseout="this.style.background=\'rgba(107, 114, 128, 0.1)\'">\n              Remind Later\n            </button>\n          ':""}\n        </div>\n      </div>\n    </div>\n  `})({showDismissButton:n.options.showDismissButton,makeBannerClickable:n.options.makeBannerClickable,releaseTime:n.changelogData?.releaseDate?p(n.changelogData.releaseDate):"",changelog:{title:n.changelogData?.title||"New Release Available",subtitle:n.changelogData?.subtitle||"",version:n.changelogData?.version||"",tags:n.changelogData?.tags||""}});e.innerHTML=t,(e=>{e.style.padding="20px",e.style.margin="16px 0",e.style.background="linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%)",e.style.border="1px solid rgba(102, 126, 234, 0.1)",e.style.borderRadius="16px",e.style.boxShadow="0 4px 20px rgba(0, 0, 0, 0.08)",e.style.color="#1a202c",e.style.fontSize="14px",e.style.fontFamily="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif",e.style.lineHeight="1.5",e.style.transition="all 0.3s ease",e.style.position="relative",e.style.overflow="hidden",e.style.animation="weReleaseSlideIn 0.4s ease-out",e.className=(e.className||"")+" werelease-banner-premium"})(e),(()=>{if(!document.getElementById("weRelease-styles")){const e=document.createElement("style");e.id="weRelease-styles",e.textContent="\n      @keyframes weReleaseSlideIn {\n        from {\n          opacity: 0;\n          transform: translateY(-10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n      \n      .werelease-banner-premium:hover {\n        transform: translateY(-1px);\n        box-shadow: 0 6px 25px rgba(0, 0, 0, 0.12) !important;\n      }\n      \n      /* Fix icon positioning and alignment */\n      .werelease-banner-content {\n        display: flex !important;\n        align-items: flex-start !important;\n        gap: 16px !important;\n      }\n      \n      .werelease-banner-content > div:first-child {\n        flex-shrink: 0 !important;\n        position: relative !important;\n      }\n      \n      .werelease-banner-content > div:nth-child(2) {\n        flex: 1 !important;\n        min-width: 0 !important;\n      }\n      \n      /* Desktop: Buttons stacked vertically (column-wise) */\n      .werelease-banner-content > div:last-child {\n        flex-shrink: 0 !important;\n        display: flex !important;\n        flex-direction: column !important;\n        gap: 8px !important;\n        align-items: stretch !important;\n      }\n      \n      /* Mobile responsive styles */\n      @media (max-width: 768px) {\n        .werelease-banner-content {\n          flex-direction: column !important;\n          gap: 12px !important;\n          padding: 16px !important;\n        }\n        \n        .werelease-banner-content > div:first-child {\n          align-self: flex-start !important;\n        }\n        \n        .werelease-banner-content > div:nth-child(2) {\n          margin-bottom: 8px !important;\n        }\n        \n        /* Mobile: Buttons side by side (row-wise) */\n        .werelease-banner-content > div:last-child {\n          width: 100% !important;\n          flex-direction: row !important;\n          justify-content: flex-start !important;\n        }\n      }\n      \n      /* Small mobile styles */\n      @media (max-width: 480px) {\n        .werelease-banner-content {\n          padding: 12px !important;\n        }\n        \n        .werelease-banner-content > div:last-child {\n          flex-direction: row !important;\n          gap: 8px !important;\n          width: 100% !important;\n        }\n        \n        .werelease-banner-content > div:last-child > * {\n          flex: 1 !important;\n        }\n      }\n      \n      @media (prefers-color-scheme: dark) {\n        .werelease-banner-premium {\n          background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%) !important;\n          border-color: rgba(102, 126, 234, 0.2) !important;\n          color: #e2e8f0 !important;\n        }\n      }\n    ",document.head.appendChild(e)}})(),n.options.className&&b(e,n.options.className),this.attachEventListeners(e,n)}attachEventListeners(e,n){n.options.makeBannerClickable&&e.addEventListener("click",t=>{(t.target===e||e.querySelector(".werelease-banner-content"))&&this.handleBannerClick(t,n)});const t=e.querySelector(".werelease-dismiss-banner");t&&n.options.showDismissButton&&t.addEventListener("click",e=>{e.stopPropagation(),this.handleDismissClick(e,n)});const a=e.querySelector(".werelease-view-changes");a&&a.addEventListener("click",e=>{e.stopPropagation(),this.handleViewChangesClick(e,n)})}handleBannerClick(e,n){n.onBannerClick&&n.onBannerClick(e,{projectId:n.projectId,releaseDate:n.changelogData?.releaseDate})}handleDismissClick(e,n){n.onDismiss&&n.onDismiss(e)}handleViewChangesClick(e,n){n.onViewChanges&&n.onViewChanges(e)}handleEmojiReaction(e,n){const t=n.querySelector(`[data-emoji="${e}"]`);t&&(b(t,"reacted"),setTimeout(()=>{return e="reacted",void t.classList.remove(e);var e},1e3));const a=n.getAttribute("data-project-id");a&&this.trackEmojiReaction(a,e)}trackEmojiReaction(e,n){}getBannerConfig(e){const n=e.getAttribute("data-project-id"),t=e.getAttribute("data-target"),a=e.getAttribute("data-theme");return n&&t?{projectId:n,target:t,theme:a||"basic",options:{makeBannerClickable:!0}}:null}constructor(){this.currentBanner=null}}const m=()=>{if(document.getElementById("werelease-feedback-styles"))return;const e=document.createElement("style");e.id="werelease-feedback-styles",e.textContent="\n    .werelease-feedback-overlay {\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.5);\n      backdrop-filter: blur(4px);\n      z-index: 10001;\n      opacity: 0;\n      transition: opacity 0.2s ease;\n      overflow: hidden;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: 16px;\n      box-sizing: border-box;\n    }\n    \n    .werelease-feedback-content {\n      position: relative;\n      transform: scale(0.95);\n      background: #ffffff;\n      border-radius: 16px;\n      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);\n      max-width: 480px;\n      width: 100%;\n      max-height: calc(100vh - 32px);\n      overflow: hidden;\n      transition: transform 0.2s ease;\n      box-sizing: border-box;\n    }\n    \n    .werelease-feedback-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 24px 24px 16px;\n      border-bottom: 1px solid #e5e7eb;\n    }\n    \n    .werelease-feedback-header h2 {\n      margin: 0;\n      font-size: 20px;\n      font-weight: 600;\n      color: #111827;\n    }\n    \n    .werelease-feedback-close {\n      background: none;\n      border: none;\n      font-size: 24px;\n      cursor: pointer;\n      padding: 4px 8px;\n      border-radius: 4px;\n      color: #6b7280;\n      transition: background-color 0.2s ease;\n    }\n    \n    .werelease-feedback-close:hover {\n      background: rgba(107, 114, 128, 0.1);\n    }\n    \n    .werelease-feedback-body {\n      padding: 24px;\n      max-height: calc(100vh - 200px);\n      overflow-y: auto;\n      overflow-x: hidden;\n      box-sizing: border-box;\n    }\n    \n    .werelease-rating-section {\n      margin-bottom: 24px;\n    }\n    \n    .werelease-rating-label {\n      display: block;\n      font-size: 16px;\n      font-weight: 500;\n      color: #374151;\n      margin-bottom: 16px;\n      text-align: center;\n    }\n    \n    .werelease-emoji-buttons {\n      display: flex;\n      gap: 12px;\n      justify-content: center;\n      flex-wrap: wrap;\n    }\n    \n    .werelease-emoji-btn {\n      background: none;\n      border: 2px solid #e5e7eb;\n      border-radius: 12px;\n      padding: 12px 16px;\n      font-size: 24px;\n      cursor: pointer;\n      transition: all 0.2s ease;\n      min-width: 56px;\n      min-height: 56px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      position: relative;\n    }\n    \n    .werelease-emoji-btn:hover {\n      border-color: #667eea;\n      transform: scale(1.1);\n      background: rgba(102, 126, 234, 0.05);\n    }\n    \n    .werelease-emoji-btn.selected {\n      border-color: #667eea;\n      background: rgba(102, 126, 234, 0.1);\n      transform: scale(1.05);\n    }\n    \n    .werelease-emoji-btn.werelease-required {\n      border-color: #ef4444;\n      background: rgba(239, 68, 68, 0.1);\n      animation: shake 0.5s ease-in-out;\n    }\n    \n    @keyframes shake {\n      0%, 100% { transform: translateX(0); }\n      25% { transform: translateX(-4px); }\n      75% { transform: translateX(4px); }\n    }\n    \n    .werelease-comment-section label {\n      display: block;\n      font-size: 14px;\n      font-weight: 500;\n      color: #374151;\n      margin-bottom: 8px;\n    }\n    \n    .werelease-comment-section textarea {\n      width: 100%;\n      min-height: 100px;\n      padding: 12px;\n      border: 2px solid #e5e7eb;\n      border-radius: 8px;\n      font-size: 14px;\n      font-family: inherit;\n      resize: vertical;\n      transition: border-color 0.2s ease;\n      box-sizing: border-box;\n      max-width: 100%;\n      overflow-wrap: break-word;\n      word-wrap: break-word;\n    }\n    \n    .werelease-comment-section textarea:focus {\n      outline: none;\n      border-color: #667eea;\n    }\n    \n    .werelease-feedback-footer {\n      display: flex;\n      justify-content: space-between;\n      gap: 12px;\n      padding: 16px 24px 24px;\n      border-top: 1px solid #e5e7eb;\n      position: relative;\n      align-items: center;\n      min-height: 72px;\n    }\n    \n    .werelease-btn-secondary {\n      background: transparent;\n      color: #6b7280;\n      border: 1px solid #d1d5db;\n      padding: 10px 16px;\n      border-radius: 8px;\n      font-size: 14px;\n      font-weight: 500;\n      cursor: pointer;\n      transition: all 0.2s ease;\n      flex: 1;\n    }\n    \n    .werelease-btn-secondary:hover {\n      background: #f9fafb;\n    }\n    \n    .werelease-btn-primary {\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      color: white;\n      border: none;\n      padding: 10px 16px;\n      border-radius: 8px;\n      font-size: 14px;\n      font-weight: 500;\n      cursor: pointer;\n      transition: all 0.2s ease;\n      flex: 1;\n    }\n    \n    .werelease-btn-primary:hover {\n      transform: translateY(-1px);\n      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n    }\n    \n    .werelease-success-message {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: #059669;\n      font-weight: 500;\n      font-size: 16px;\n      padding: 16px;\n    }\n    \n    .werelease-error-message {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: #dc2626;\n      font-weight: 500;\n      font-size: 16px;\n      padding: 16px;\n    }\n\n    /* Loading Animation */\n    .werelease-feedback-loader {\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      background: rgba(255, 255, 255, 0.95);\n      backdrop-filter: blur(8px);\n      padding: 12px 20px;\n      border-radius: 10px;\n      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n      border: 1px solid rgba(102, 126, 234, 0.2);\n      z-index: 10;\n      opacity: 0;\n      animation: fadeInLoader 0.3s ease forwards;\n    }\n    \n    @keyframes fadeInLoader {\n      to {\n        opacity: 1;\n      }\n    }\n    \n    .werelease-spinner {\n      width: 20px;\n      height: 20px;\n      border: 2px solid #e2e8f0;\n      border-top: 2px solid #667eea;\n      border-radius: 50%;\n      animation: spin 1s linear infinite;\n    }\n    \n    @keyframes spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n    \n    .werelease-feedback-loader span {\n      font-size: 14px;\n      color: #1e293b;\n      font-weight: 500;\n    }\n    \n    /* Success Animation */\n    .werelease-feedback-success {\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      background: rgba(255, 255, 255, 0.95);\n      backdrop-filter: blur(8px);\n      padding: 12px 20px;\n      border-radius: 10px;\n      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n      border: 1px solid rgba(34, 197, 94, 0.3);\n      z-index: 10;\n      opacity: 0;\n      animation: slideUpSuccess 0.5s ease forwards;\n    }\n    \n    @keyframes slideUpSuccess {\n      0% {\n        opacity: 0;\n        transform: translate(-50%, -40%);\n      }\n      100% {\n        opacity: 1;\n        transform: translate(-50%, -50%);\n      }\n    }\n    \n    .werelease-checkmark {\n      width: 24px;\n      height: 24px;\n    }\n    \n    .werelease-checkmark-circle {\n      width: 24px;\n      height: 24px;\n    }\n    \n    .werelease-checkmark-circle-bg {\n      stroke: #22c55e;\n      stroke-width: 2;\n      stroke-dasharray: 166;\n      stroke-dashoffset: 166;\n      animation: drawCircle 0.6s ease-in-out forwards;\n    }\n    \n    .werelease-checkmark-check {\n      stroke: #22c55e;\n      stroke-width: 3;\n      stroke-linecap: round;\n      stroke-linejoin: round;\n      stroke-dasharray: 48;\n      stroke-dashoffset: 48;\n      animation: drawCheck 0.4s ease-in-out 0.3s forwards;\n    }\n    \n    @keyframes drawCircle {\n      to {\n        stroke-dashoffset: 0;\n      }\n    }\n    \n    @keyframes drawCheck {\n      to {\n        stroke-dashoffset: 0;\n      }\n    }\n    \n    .werelease-feedback-success span {\n      font-size: 14px;\n      color: #22c55e;\n      font-weight: 600;\n    }\n    \n    /* Button state transitions for feedback modal */\n    .werelease-feedback-footer.loading .werelease-btn-primary,\n    .werelease-feedback-footer.loading .werelease-btn-secondary {\n      opacity: 0.3;\n      pointer-events: none;\n      transition: opacity 0.3s ease;\n    }\n    \n    .werelease-feedback-footer.success .werelease-btn-primary,\n    .werelease-feedback-footer.success .werelease-btn-secondary {\n      opacity: 0.3;\n      transition: opacity 0.3s ease;\n    }\n    \n    @media (max-width: 768px) {\n      .werelease-feedback-overlay {\n        padding: 12px;\n      }\n      \n      .werelease-feedback-content {\n        max-height: calc(100vh - 24px);\n        border-radius: 12px;\n      }\n      \n      .werelease-feedback-header,\n      .werelease-feedback-footer {\n        padding-left: 20px;\n        padding-right: 20px;\n      }\n      \n      .werelease-feedback-body {\n        padding: 20px;\n        max-height: calc(100vh - 160px);\n      }\n      \n      .werelease-feedback-header h2 {\n        font-size: 18px;\n      }\n      \n      .werelease-feedback-close {\n        font-size: 22px;\n        padding: 8px;\n        min-width: 44px;\n        min-height: 44px;\n      }\n      \n      .werelease-emoji-buttons {\n        gap: 8px;\n      }\n      \n      .werelease-emoji-btn {\n        min-width: 52px;\n        min-height: 52px;\n        font-size: 20px;\n      }\n      \n      .werelease-comment-section textarea {\n        min-height: 120px;\n        font-size: 16px;\n      }\n      \n      .werelease-feedback-footer {\n        flex-direction: column;\n        gap: 8px;\n      }\n      \n      .werelease-btn-primary,\n      .werelease-btn-secondary {\n        width: 100%;\n        padding: 12px 16px;\n        font-size: 16px;\n        min-height: 48px;\n      }\n      \n      /* Mobile loading and success animations */\n      .werelease-feedback-loader,\n      .werelease-feedback-success {\n        padding: 16px 24px;\n        border-radius: 12px;\n      }\n      \n      .werelease-feedback-loader span,\n      .werelease-feedback-success span {\n        font-size: 16px;\n      }\n      \n      .werelease-spinner {\n        width: 24px;\n        height: 24px;\n      }\n      \n      .werelease-checkmark {\n        width: 28px;\n        height: 28px;\n      }\n      \n      .werelease-checkmark-circle {\n        width: 28px;\n        height: 28px;\n      }\n    }\n    \n    @media (max-width: 480px) {\n      .werelease-feedback-overlay {\n        padding: 8px;\n      }\n      \n      .werelease-feedback-content {\n        border-radius: 8px;\n      }\n      \n      .werelease-feedback-header,\n      .werelease-feedback-body,\n      .werelease-feedback-footer {\n        padding-left: 16px;\n        padding-right: 16px;\n      }\n      \n      .werelease-feedback-body {\n        padding-top: 16px;\n        padding-bottom: 16px;\n      }\n      \n      .werelease-rating-label {\n        font-size: 15px;\n      }\n      \n      .werelease-emoji-btn {\n        min-width: 48px;\n        min-height: 48px;\n        font-size: 18px;\n      }\n    }\n    \n    /* Entrance Animation */\n    .werelease-feedback-overlay.werelease-entering {\n      opacity: 1;\n    }\n    \n    .werelease-feedback-overlay.werelease-entering .werelease-feedback-content {\n      transform: scale(1);\n    }\n    \n    /* Exit Animation */\n    .werelease-feedback-overlay.werelease-exiting {\n      opacity: 0;\n    }\n    \n    .werelease-feedback-overlay.werelease-exiting .werelease-feedback-content {\n      transform: scale(0.95);\n    }\n    \n    /* Dark mode support */\n    @media (prefers-color-scheme: dark) {\n      .werelease-feedback-content {\n        background: #1f2937;\n        color: #f9fafb;\n      }\n      \n      .werelease-feedback-header {\n        border-bottom-color: #374151;\n      }\n      \n      .werelease-feedback-header h2 {\n        color: #f9fafb;\n      }\n      \n      .werelease-rating-label,\n      .werelease-comment-section label {\n        color: #e5e7eb;\n      }\n      \n      .werelease-emoji-btn {\n        border-color: #4b5563;\n        background: #374151;\n      }\n      \n      .werelease-emoji-btn:hover {\n        border-color: #667eea;\n        background: #4b5563;\n      }\n      \n      .werelease-emoji-btn.selected {\n        border-color: #667eea;\n        background: #4b5563;\n      }\n      \n      .werelease-comment-section textarea {\n        background: #374151;\n        border-color: #4b5563;\n        color: #f9fafb;\n      }\n      \n      .werelease-comment-section textarea:focus {\n        border-color: #667eea;\n      }\n      \n      .werelease-feedback-footer {\n        border-top-color: #374151;\n      }\n      \n      .werelease-btn-secondary {\n        color: #d1d5db;\n        border-color: #4b5563;\n      }\n      \n      .werelease-btn-secondary:hover {\n        background: #374151;\n      }\n      \n      /* Dark mode for feedback modal loading and success animations */\n      .werelease-feedback-loader {\n        background: rgba(30, 41, 59, 0.95);\n        border-color: rgba(102, 126, 234, 0.3);\n      }\n      \n      .werelease-feedback-loader span {\n        color: #f1f5f9;\n      }\n      \n      .werelease-spinner {\n        border-color: #475569;\n        border-top-color: #667eea;\n      }\n      \n      .werelease-feedback-success {\n        background: rgba(30, 41, 59, 0.95);\n        border-color: rgba(34, 197, 94, 0.4);\n      }\n    }\n  ",document.head.appendChild(e)};class u{setFeedbackCallback(e){this.feedbackSubmissionCallback=e}showChangesModal(e,n){this.closeModal();const t=document.createElement("div");t.id="werelease-changes-modal",t.innerHTML=(e=>{const n=e?.title||"What's New",t=e?.subtitle,a=e?.version||"v1.0.0",r=e?.description||"Check out our latest improvements and features.",s=((e,n)=>{const t=n?n.split(",").map(e=>e.trim()):[],a=e.split("\n").filter(e=>e.trim()).filter(e=>e.trim().startsWith("-")||e.trim().startsWith("*")||e.trim().startsWith("•")),r=[];return a.length>0?a.slice(0,4).forEach((e,n)=>{const t=e.replace(/^[-*•]\s*/,"").trim();r.push({icon:["✨","⚡","🚀","🎯","💡","🔥"][n]||"✨",title:t.length>30?t.substring(0,30)+"...":t,detail:t.length>30?t.substring(30):"New improvement"})}):(t.slice(0,4).forEach((e,n)=>{r.push({icon:["✨","⚡","🚀","🎯"][n]||"✨",title:e.charAt(0).toUpperCase()+e.slice(1),detail:"Enhanced functionality"})}),0===r.length&&r.push({icon:"✨",title:"New Features",detail:"Latest improvements"},{icon:"⚡",title:"Performance",detail:"Faster experience"},{icon:"🚀",title:"Enhancements",detail:"Better usability"},{icon:"🎯",title:"Bug Fixes",detail:"Stability improvements"})),r})(r,e?.tags||"");return`\n    <div class="werelease-popover-overlay werelease-modal-close">\n      <div class="werelease-popover-content" onclick="event.stopPropagation()">\n        <div class="werelease-popover-arrow"></div>\n        \n        <div class="werelease-popover-header">\n          <div class="werelease-header-content">\n            <span class="werelease-rocket-icon">🚀</span>\n            <h3>${n}</h3>\n            <span class="werelease-version-badge">${a}</span>\n          </div>\n          <button class="werelease-popover-close werelease-modal-close">×</button>\n        </div>\n        \n        <div class="werelease-popover-body">\n          ${t?`<div class="werelease-subtitle">${t}</div>`:""}\n          \n          <div class="werelease-features-grid">\n            ${s.map((e,n)=>`\n              <div class="werelease-feature-card" data-feature="feature-${n}">\n                <div class="werelease-feature-icon">${e.icon}</div>\n                <div class="werelease-feature-content">\n                  <h4>${e.title}</h4>\n                  <p>${e.detail}</p>\n                </div>\n              </div>\n            `).join("")}\n          </div>\n          \n          ${r.length>200?`\n            <div class="werelease-highlight-feature">\n              <div class="werelease-highlight-icon">📝</div>\n              <div class="werelease-highlight-content">\n                <h4>Full Release Notes</h4>\n                <div class="werelease-description-content">\n                  ${o=r,o.replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/^- (.*$)/gim,"<li>$1</li>").replace(/(<li>.*<\/li>)/g,"<ul>$1</ul>").replace(/\n/g,"<br/>")}\n                </div>\n              </div>\n            </div>\n          `:""}\n          \n          <div class="werelease-action-bar">\n            <button class="werelease-btn-secondary werelease-modal-close">\n              Show me later\n            </button>\n            <button class="werelease-btn-primary werelease-submit-feedback">\n              Awesome! 🎉\n            </button>\n            <div class="werelease-feedback-loader" style="display: none;">\n              <div class="werelease-spinner"></div>\n              <span>Saving your feedback...</span>\n            </div>\n            <div class="werelease-feedback-success" style="display: none;">\n              <div class="werelease-checkmark">\n                <svg class="werelease-checkmark-circle" viewBox="0 0 52 52">\n                  <circle class="werelease-checkmark-circle-bg" cx="26" cy="26" r="25" fill="none"/>\n                  <path class="werelease-checkmark-check" fill="none" d="m14.1 27.2l7.1 7.2 16.7-16.8"/>\n                </svg>\n              </div>\n              <span>Thank you for your feedback!</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `;var o})(n),(()=>{if(document.getElementById("werelease-popover-styles"))return;const e=document.createElement("style");e.id="werelease-popover-styles",e.textContent="\n    .werelease-popover-overlay {\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: transparent;\n      z-index: 10000;\n      opacity: 0;\n      transition: opacity 0.3s ease;\n      overflow: hidden;\n      display: flex;\n      align-items: flex-start;\n      justify-content: center;\n      padding-top: 20vh;\n      box-sizing: border-box;\n    }\n    \n    .werelease-popover-content {\n      position: relative;\n      transform: translateY(-20px) scale(0.95);\n      background: #ffffff;\n      border-radius: 16px;\n      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(0, 0, 0, 0.05);\n      max-width: 420px;\n      width: 90%;\n      max-height: 80vh;\n      overflow: hidden;\n      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);\n      box-sizing: border-box;\n      border: 1px solid rgba(255, 255, 255, 0.2);\n    }\n    \n    .werelease-popover-arrow {\n      position: absolute;\n      top: -8px;\n      left: 50%;\n      transform: translateX(-50%);\n      width: 16px;\n      height: 16px;\n      background: #ffffff;\n      border: 1px solid rgba(0, 0, 0, 0.05);\n      border-bottom: none;\n      border-right: none;\n      transform: translateX(-50%) rotate(45deg);\n      z-index: 1;\n    }\n    \n    .werelease-popover-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 24px 24px 16px;\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      color: white;\n      position: relative;\n    }\n    \n    .werelease-header-content {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n    }\n    \n    .werelease-rocket-icon {\n      font-size: 24px;\n      animation: rocket-bounce 2s ease-in-out infinite;\n    }\n    \n    @keyframes rocket-bounce {\n      0%, 100% { transform: translateY(0px); }\n      50% { transform: translateY(-3px); }\n    }\n    \n    .werelease-popover-header h3 {\n      margin: 0;\n      font-size: 18px;\n      font-weight: 600;\n      color: white;\n    }\n    \n    .werelease-version-badge {\n      background: rgba(255, 255, 255, 0.2);\n      color: white;\n      padding: 4px 8px;\n      border-radius: 12px;\n      font-size: 11px;\n      font-weight: 600;\n      letter-spacing: 0.5px;\n    }\n    \n    .werelease-popover-close {\n      background: rgba(255, 255, 255, 0.2);\n      border: none;\n      color: white;\n      font-size: 18px;\n      cursor: pointer;\n      padding: 8px;\n      border-radius: 8px;\n      transition: all 0.2s ease;\n      width: 36px;\n      height: 36px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    \n    .werelease-popover-close:hover {\n      background: rgba(255, 255, 255, 0.3);\n      transform: scale(1.05);\n    }\n    \n    .werelease-popover-body {\n      padding: 24px;\n      max-height: 450px;\n      overflow-y: auto;\n      scrollbar-width: thin;\n      scrollbar-color: rgba(102, 126, 234, 0.3) transparent;\n    }\n    \n    .werelease-popover-body::-webkit-scrollbar {\n      width: 6px;\n    }\n    \n    .werelease-popover-body::-webkit-scrollbar-track {\n      background: transparent;\n    }\n    \n    .werelease-popover-body::-webkit-scrollbar-thumb {\n      background: rgba(102, 126, 234, 0.3);\n      border-radius: 3px;\n    }\n    \n    .werelease-popover-body::-webkit-scrollbar-thumb:hover {\n      background: rgba(102, 126, 234, 0.5);\n    }\n    \n    .werelease-subtitle {\n      font-size: 14px;\n      color: #64748b;\n      margin-bottom: 16px;\n      font-style: italic;\n      text-align: center;\n      line-height: 1.4;\n    }\n    \n    .werelease-description-content {\n      font-size: 13px;\n      color: #475569;\n      line-height: 1.5;\n      max-height: 120px;\n      overflow-y: auto;\n      padding: 8px 0;\n    }\n    \n    .werelease-description-content h1,\n    .werelease-description-content h2,\n    .werelease-description-content h3 {\n      font-size: 14px;\n      font-weight: 600;\n      margin: 8px 0 4px 0;\n      color: #1e293b;\n    }\n    \n    .werelease-description-content ul {\n      margin: 8px 0;\n      padding-left: 16px;\n    }\n    \n    .werelease-description-content li {\n      margin: 4px 0;\n    }\n    \n    .werelease-description-content code {\n      background: rgba(102, 126, 234, 0.1);\n      padding: 2px 4px;\n      border-radius: 4px;\n      font-family: monospace;\n      font-size: 12px;\n    }\n    \n    .werelease-features-grid {\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      gap: 16px;\n      margin-bottom: 24px;\n    }\n    \n    .werelease-feature-card {\n      display: flex;\n      align-items: flex-start;\n      gap: 12px;\n      padding: 16px;\n      border-radius: 12px;\n      background: #f8fafc;\n      border: 1px solid #e2e8f0;\n      cursor: pointer;\n      transition: all 0.2s ease;\n      position: relative;\n      overflow: hidden;\n    }\n    \n    .werelease-feature-card:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);\n      border-color: #667eea;\n    }\n    \n    .werelease-feature-card::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      height: 3px;\n      background: linear-gradient(90deg, #667eea, #764ba2);\n      transform: scaleX(0);\n      transition: transform 0.3s ease;\n    }\n    \n    .werelease-feature-card:hover::before {\n      transform: scaleX(1);\n    }\n    \n    .werelease-feature-icon {\n      font-size: 20px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: 40px;\n      height: 40px;\n      background: white;\n      border-radius: 10px;\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n      flex-shrink: 0;\n    }\n    \n    .werelease-feature-content h4 {\n      margin: 0 0 4px 0;\n      font-size: 14px;\n      font-weight: 600;\n      color: #1e293b;\n    }\n    \n    .werelease-feature-content p {\n      margin: 0 0 6px 0;\n      font-size: 12px;\n      color: #64748b;\n      line-height: 1.4;\n    }\n    \n    .werelease-feature-stat {\n      font-size: 10px;\n      color: #667eea;\n      font-weight: 600;\n      background: rgba(102, 126, 234, 0.1);\n      padding: 3px 6px;\n      border-radius: 8px;\n      display: inline-block;\n      margin-top: 4px;\n    }\n    \n    .werelease-highlight-feature {\n      display: flex;\n      align-items: flex-start;\n      gap: 12px;\n      padding: 16px;\n      margin: 16px 0;\n      background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);\n      border: 1px solid rgba(102, 126, 234, 0.2);\n      border-radius: 12px;\n      position: relative;\n      overflow: hidden;\n    }\n    \n    .werelease-highlight-feature::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      height: 2px;\n      background: linear-gradient(90deg, #667eea, #764ba2);\n    }\n    \n    .werelease-highlight-icon {\n      font-size: 20px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: 36px;\n      height: 36px;\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      border-radius: 50%;\n      flex-shrink: 0;\n      animation: pulse 2s ease-in-out infinite;\n    }\n    \n    @keyframes pulse {\n      0%, 100% { transform: scale(1); }\n      50% { transform: scale(1.05); }\n    }\n    \n    .werelease-highlight-content h4 {\n      margin: 0 0 4px 0;\n      font-size: 13px;\n      font-weight: 600;\n      color: #1e293b;\n      line-height: 1.3;\n    }\n    \n    .werelease-highlight-content p {\n      margin: 0;\n      font-size: 11px;\n      color: #64748b;\n      line-height: 1.4;\n    }\n    \n    .werelease-action-bar {\n      display: flex;\n      gap: 12px;\n      position: relative;\n      align-items: center;\n      min-height: 48px;\n    }\n    \n    .werelease-btn-secondary {\n      background: transparent;\n      color: #64748b;\n      border: 1px solid #e2e8f0;\n      padding: 12px 20px;\n      border-radius: 10px;\n      font-size: 14px;\n      font-weight: 500;\n      cursor: pointer;\n      transition: all 0.2s ease;\n      flex: 1;\n    }\n    \n    .werelease-btn-secondary:hover {\n      background: #f1f5f9;\n      border-color: #cbd5e1;\n    }\n    \n    .werelease-btn-primary {\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      color: white;\n      border: none;\n      padding: 12px 20px;\n      border-radius: 10px;\n      font-size: 14px;\n      font-weight: 500;\n      cursor: pointer;\n      transition: all 0.2s ease;\n      flex: 1;\n      position: relative;\n      overflow: hidden;\n    }\n    \n    .werelease-btn-primary::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: -100%;\n      width: 100%;\n      height: 100%;\n      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n      transition: left 0.5s ease;\n    }\n    \n    .werelease-btn-primary:hover {\n      transform: translateY(-1px);\n      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);\n    }\n    \n    .werelease-btn-primary:hover::before {\n      left: 100%;\n    }\n    \n    /* Loading Animation */\n    .werelease-feedback-loader {\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      background: rgba(255, 255, 255, 0.95);\n      backdrop-filter: blur(8px);\n      padding: 12px 20px;\n      border-radius: 10px;\n      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n      border: 1px solid rgba(102, 126, 234, 0.2);\n      z-index: 10;\n      opacity: 0;\n      animation: fadeInLoader 0.3s ease forwards;\n    }\n    \n    @keyframes fadeInLoader {\n      to {\n        opacity: 1;\n      }\n    }\n    \n    .werelease-spinner {\n      width: 20px;\n      height: 20px;\n      border: 2px solid #e2e8f0;\n      border-top: 2px solid #667eea;\n      border-radius: 50%;\n      animation: spin 1s linear infinite;\n    }\n    \n    @keyframes spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n    \n    .werelease-feedback-loader span {\n      font-size: 14px;\n      color: #1e293b;\n      font-weight: 500;\n    }\n    \n    /* Success Animation */\n    .werelease-feedback-success {\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      background: rgba(255, 255, 255, 0.95);\n      backdrop-filter: blur(8px);\n      padding: 12px 20px;\n      border-radius: 10px;\n      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n      border: 1px solid rgba(34, 197, 94, 0.3);\n      z-index: 10;\n      opacity: 0;\n      animation: slideUpSuccess 0.5s ease forwards;\n    }\n    \n    @keyframes slideUpSuccess {\n      0% {\n        opacity: 0;\n        transform: translate(-50%, -40%);\n      }\n      100% {\n        opacity: 1;\n        transform: translate(-50%, -50%);\n      }\n    }\n    \n    .werelease-checkmark {\n      width: 24px;\n      height: 24px;\n    }\n    \n    .werelease-checkmark-circle {\n      width: 24px;\n      height: 24px;\n    }\n    \n    .werelease-checkmark-circle-bg {\n      stroke: #22c55e;\n      stroke-width: 2;\n      stroke-dasharray: 166;\n      stroke-dashoffset: 166;\n      animation: drawCircle 0.6s ease-in-out forwards;\n    }\n    \n    .werelease-checkmark-check {\n      stroke: #22c55e;\n      stroke-width: 3;\n      stroke-linecap: round;\n      stroke-linejoin: round;\n      stroke-dasharray: 48;\n      stroke-dashoffset: 48;\n      animation: drawCheck 0.4s ease-in-out 0.3s forwards;\n    }\n    \n    @keyframes drawCircle {\n      to {\n        stroke-dashoffset: 0;\n      }\n    }\n    \n    @keyframes drawCheck {\n      to {\n        stroke-dashoffset: 0;\n      }\n    }\n    \n    .werelease-feedback-success span {\n      font-size: 14px;\n      color: #22c55e;\n      font-weight: 600;\n    }\n    \n    /* Button state transitions */\n    .werelease-action-bar.loading .werelease-btn-primary,\n    .werelease-action-bar.loading .werelease-btn-secondary {\n      opacity: 0.3;\n      pointer-events: none;\n      transition: opacity 0.3s ease;\n    }\n    \n    .werelease-action-bar.success .werelease-btn-primary,\n    .werelease-action-bar.success .werelease-btn-secondary {\n      opacity: 0.3;\n      transition: opacity 0.3s ease;\n    }\n    \n    /* Tablet Styles */\n    @media (max-width: 768px) and (min-width: 641px) {\n      .werelease-popover-overlay {\n        padding: 20px;\n      }\n      \n      .werelease-popover-content {\n        width: 100%;\n        max-width: 500px;\n        border-radius: 16px;\n      }\n      \n      .werelease-features-grid {\n        grid-template-columns: 1fr 1fr;\n        gap: 14px;\n      }\n      \n      .werelease-feature-card {\n        padding: 14px;\n      }\n      \n      .werelease-action-bar {\n        gap: 16px;\n      }\n      \n      .werelease-btn-primary,\n      .werelease-btn-secondary {\n        padding: 14px 24px;\n        font-size: 15px;\n      }\n    }\n    \n    /* Mobile Styles */\n    @media (max-width: 640px) {\n      .werelease-popover-overlay {\n        padding: 16px;\n        align-items: flex-start !important;\n        justify-content: center !important;\n      }\n      \n      .werelease-popover-content {\n        width: 100% !important;\n        max-width: calc(100vw - 32px) !important;\n        position: relative !important;\n        left: auto !important;\n        top: auto !important;\n        transform: none !important;\n        margin-top: 20px;\n        border-radius: 16px;\n        max-height: calc(100vh - 80px);\n        overflow-y: auto;\n      }\n      \n      .werelease-popover-arrow {\n        display: none !important;\n      }\n      \n      .werelease-popover-header {\n        padding: 20px 20px 16px;\n      }\n      \n      .werelease-header-content h3 {\n        font-size: 18px;\n      }\n      \n      .werelease-version-badge {\n        font-size: 11px;\n        padding: 4px 8px;\n      }\n      \n      .werelease-popover-body {\n        padding: 16px 20px 20px;\n        max-height: none;\n        overflow-y: visible;\n      }\n      \n      .werelease-subtitle {\n        font-size: 13px;\n        margin-bottom: 12px;\n      }\n      \n      .werelease-features-grid {\n        grid-template-columns: 1fr;\n        gap: 12px;\n        margin-bottom: 20px;\n      }\n      \n      .werelease-feature-card {\n        padding: 16px;\n        border-radius: 12px;\n      }\n      \n      .werelease-feature-icon {\n        width: 36px;\n        height: 36px;\n        font-size: 18px;\n      }\n      \n      .werelease-feature-content h4 {\n        font-size: 15px;\n        margin-bottom: 4px;\n      }\n      \n      .werelease-feature-content p {\n        font-size: 13px;\n        line-height: 1.4;\n      }\n      \n      .werelease-highlight-feature {\n        padding: 16px;\n        margin: 16px 0;\n        border-radius: 12px;\n      }\n      \n      .werelease-highlight-icon {\n        width: 32px;\n        height: 32px;\n        font-size: 16px;\n      }\n      \n      .werelease-highlight-content h4 {\n        font-size: 14px;\n        line-height: 1.3;\n      }\n      \n      .werelease-highlight-content p {\n        font-size: 12px;\n      }\n      \n      .werelease-description-content {\n        max-height: 100px;\n        font-size: 13px;\n      }\n      \n      .werelease-action-bar {\n        flex-direction: column;\n        gap: 12px;\n        margin-top: 20px;\n      }\n      \n      .werelease-btn-primary,\n      .werelease-btn-secondary {\n        width: 100%;\n        padding: 16px 20px;\n        font-size: 16px;\n        font-weight: 500;\n        border-radius: 12px;\n        justify-content: center;\n      }\n      \n      .werelease-btn-primary {\n        order: 1;\n      }\n      \n      .werelease-btn-secondary {\n        order: 2;\n      }\n      \n      /* Mobile loading and success animations */\n      .werelease-feedback-loader,\n      .werelease-feedback-success {\n        padding: 16px 24px;\n        border-radius: 12px;\n      }\n      \n      .werelease-feedback-loader span,\n      .werelease-feedback-success span {\n        font-size: 16px;\n      }\n      \n      .werelease-spinner {\n        width: 24px;\n        height: 24px;\n      }\n      \n      .werelease-checkmark {\n        width: 28px;\n        height: 28px;\n      }\n      \n      .werelease-checkmark-circle {\n        width: 28px;\n        height: 28px;\n      }\n    }\n    \n    /* Very small screens */\n    @media (max-width: 480px) {\n      .werelease-popover-overlay {\n        padding: 12px;\n      }\n      \n      .werelease-popover-content {\n        max-width: calc(100vw - 24px) !important;\n        margin-top: 10px;\n        border-radius: 14px;\n      }\n      \n      .werelease-popover-header {\n        padding: 16px 16px 12px;\n      }\n      \n      .werelease-header-content h3 {\n        font-size: 16px;\n      }\n      \n      .werelease-popover-body {\n        padding: 12px 16px 16px;\n      }\n      \n      .werelease-feature-card {\n        padding: 14px;\n      }\n      \n      .werelease-highlight-feature {\n        padding: 14px;\n      }\n    }\n    \n    /* Dark mode support */\n    @media (prefers-color-scheme: dark) {\n      .werelease-popover-content {\n        background: #1e293b;\n        border-color: #334155;\n      }\n      \n      .werelease-popover-arrow {\n        background: #1e293b;\n        border-color: #334155;\n      }\n      \n      .werelease-feature-card {\n        background: #334155;\n        border-color: #475569;\n      }\n      \n      .werelease-feature-card:hover {\n        border-color: #667eea;\n      }\n      \n      .werelease-feature-icon {\n        background: #475569;\n      }\n      \n      .werelease-feature-content h4 {\n        color: #f1f5f9;\n      }\n      \n      .werelease-feature-content p {\n        color: #94a3b8;\n      }\n      \n      .werelease-feature-stat {\n        color: #667eea;\n        background: rgba(102, 126, 234, 0.2);\n      }\n      \n      .werelease-highlight-feature {\n        background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);\n        border-color: rgba(102, 126, 234, 0.3);\n      }\n      \n      .werelease-highlight-content h4 {\n        color: #f1f5f9;\n      }\n      \n      .werelease-highlight-content p {\n        color: #94a3b8;\n      }\n      \n      .werelease-btn-secondary {\n        color: #94a3b8;\n        border-color: #475569;\n      }\n      \n      .werelease-btn-secondary:hover {\n        background: #475569;\n        border-color: #64748b;\n      }\n      \n      .werelease-subtitle {\n        color: #94a3b8;\n      }\n      \n      .werelease-description-content {\n        color: #cbd5e1;\n      }\n      \n      .werelease-description-content h1,\n      .werelease-description-content h2,\n      .werelease-description-content h3 {\n        color: #f1f5f9;\n      }\n      \n      .werelease-description-content code {\n        background: rgba(102, 126, 234, 0.2);\n        color: #e2e8f0;\n      }\n      \n      .werelease-popover-body::-webkit-scrollbar-thumb {\n        background: rgba(102, 126, 234, 0.4);\n      }\n      \n      .werelease-popover-body::-webkit-scrollbar-thumb:hover {\n        background: rgba(102, 126, 234, 0.6);\n      }\n      \n      /* Dark mode for loading and success animations */\n      .werelease-feedback-loader {\n        background: rgba(30, 41, 59, 0.95);\n        border-color: rgba(102, 126, 234, 0.3);\n      }\n      \n      .werelease-feedback-loader span {\n        color: #f1f5f9;\n      }\n      \n      .werelease-spinner {\n        border-color: #475569;\n        border-top-color: #667eea;\n      }\n      \n      .werelease-feedback-success {\n        background: rgba(30, 41, 59, 0.95);\n        border-color: rgba(34, 197, 94, 0.4);\n      }\n      \n      /* Dark mode mobile adjustments */\n      @media (max-width: 640px) {\n        .werelease-popover-content {\n          background: #1e293b !important;\n          border-color: #334155 !important;\n        }\n        \n        .werelease-feature-card {\n          background: #334155 !important;\n          border-color: #475569 !important;\n        }\n        \n        .werelease-highlight-feature {\n          background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%) !important;\n          border-color: rgba(102, 126, 234, 0.3) !important;\n        }\n      }\n    }\n    \n    /* Entrance Animation */\n    .werelease-popover-overlay.werelease-entering {\n      opacity: 1;\n    }\n    \n    .werelease-popover-overlay.werelease-entering .werelease-popover-content {\n      transform: translateY(0) scale(1);\n    }\n    \n    /* Stagger animation for feature cards */\n    .werelease-feature-card {\n      animation: slideInUp 0.5s ease forwards;\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    \n    .werelease-feature-card:nth-child(1) { animation-delay: 0.1s; }\n    .werelease-feature-card:nth-child(2) { animation-delay: 0.2s; }\n    .werelease-feature-card:nth-child(3) { animation-delay: 0.3s; }\n    .werelease-feature-card:nth-child(4) { animation-delay: 0.4s; }\n    \n    @keyframes slideInUp {\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n  ",document.head.appendChild(e)})(),document.body.appendChild(t),this.currentModal=t,e&&this.positionPopover(t,e),requestAnimationFrame(()=>{const e=t.querySelector(".werelease-popover-overlay");e&&e.classList.add("werelease-entering")}),this.attachChangesModalEventListeners(t),t.addEventListener("click",e=>{e.target===t&&this.closeModal()}),document.body.style.overflow="hidden"}showFeedbackModal(e=!0,n="both"){this.closeModal();const t=document.createElement("div");t.id="werelease-feedback-modal",t.innerHTML=((e=!0,n="both")=>`\n    <div class="werelease-feedback-overlay werelease-modal-close">\n      <div class="werelease-feedback-content" onclick="event.stopPropagation()">\n        <div class="werelease-feedback-header">\n          <h2>💬 Share Your Feedback</h2>\n          ${e?'<button class="werelease-feedback-close werelease-modal-close">×</button>':""}\n        </div>\n        \n        <div class="werelease-feedback-body">\n          ${"emoji"===n||"both"===n?'\n          <div class="werelease-rating-section">\n            <label class="werelease-rating-label">How do you feel about our latest updates?</label>\n            <div class="werelease-emoji-buttons">\n              <button class="werelease-emoji-btn werelease-emoji-reaction" data-emoji="😡" data-rating="1">😡</button>\n              <button class="werelease-emoji-btn werelease-emoji-reaction" data-emoji="😞" data-rating="2">😞</button>\n              <button class="werelease-emoji-btn werelease-emoji-reaction" data-emoji="😐" data-rating="3">😐</button>\n              <button class="werelease-emoji-btn werelease-emoji-reaction" data-emoji="😊" data-rating="4">😊</button>\n              <button class="werelease-emoji-btn werelease-emoji-reaction" data-emoji="🤩" data-rating="5">🤩</button>\n            </div>\n          </div>\n          ':""}\n          \n          ${"text"===n||"both"===n?`\n          <div class="werelease-comment-section">\n            <label for="werelease-feedback-comment">${"both"===n?"Tell us more (optional):":"Share your thoughts:"}</label>\n            <textarea id="werelease-feedback-comment" placeholder="${"both"===n?"What would you like to see improved or what do you love about the updates?":"What are your thoughts about our latest updates? What would you like to see improved?"}"></textarea>\n          </div>\n          `:""}\n        </div>\n        \n        <div class="werelease-feedback-footer">\n          ${e?'<button class="werelease-btn-secondary werelease-modal-close">Maybe Later</button>':""}\n          <button class="werelease-btn-primary werelease-submit-feedback">Send Feedback</button>\n          <div class="werelease-feedback-loader" style="display: none;">\n            <div class="werelease-spinner"></div>\n            <span>Saving your feedback...</span>\n          </div>\n          <div class="werelease-feedback-success" style="display: none;">\n            <div class="werelease-checkmark">\n              <svg class="werelease-checkmark-circle" viewBox="0 0 52 52">\n                <circle class="werelease-checkmark-circle-bg" cx="26" cy="26" r="25" fill="none"/>\n                <path class="werelease-checkmark-check" fill="none" d="m14.1 27.2l7.1 7.2 16.7-16.8"/>\n              </svg>\n            </div>\n            <span>Thank you for your feedback!</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  `)(e,n),m(),document.body.appendChild(t),this.currentModal=t,requestAnimationFrame(()=>{const e=t.querySelector(".werelease-feedback-overlay");e&&e.classList.add("werelease-entering")}),setTimeout(()=>{this.attachFeedbackEventListeners(t,e,n)},10),document.body.style.overflow="hidden"}showThankYouModal(){this.closeModal();const e=document.createElement("div");e.id="werelease-thankyou-modal",e.innerHTML=this.renderThankYouTemplate(),m(),document.body.appendChild(e),this.currentModal=e,requestAnimationFrame(()=>{const n=e.querySelector(".werelease-feedback-overlay");n&&n.classList.add("werelease-entering")}),setTimeout(()=>{this.attachThankYouEventListeners(e)},10),document.body.style.overflow="hidden"}closeModal(){if(this.currentModal){const e=this.currentModal.querySelector(".werelease-modal, .werelease-popover-overlay, .werelease-feedback-overlay");e?(e.classList.add("werelease-exiting"),setTimeout(()=>{h(this.currentModal),this.currentModal=null,document.body.style.overflow=""},300)):(h(this.currentModal),this.currentModal=null,document.body.style.overflow="")}}positionPopover(e,n){const t=e.querySelector(".werelease-popover-overlay"),a=e.querySelector(".werelease-popover-content"),r=e.querySelector(".werelease-popover-arrow"),s=n.getBoundingClientRect(),{width:o,height:i}={width:window.innerWidth,height:window.innerHeight};if(o<=640)return t.style.alignItems="flex-start",t.style.justifyContent="center",t.style.paddingTop="20px",t.style.paddingLeft="16px",t.style.paddingRight="16px",a.style.position="relative",a.style.left="auto",a.style.top="auto",a.style.transform="scale(0.95)",a.style.width="100%",a.style.maxWidth="calc(100vw - 32px)",void(r&&(r.style.display="none"));const l=i-(s.bottom+16),d=s.top-16,c=l>=480||l>d;let p,h=s.left+s.width/2-210;h=Math.max(16,Math.min(h,o-420-16));let b="0px",g="translateX(-50%) rotate(45deg)";c?(p=s.bottom+16,b="-8px",g="translateX(-50%) rotate(45deg)"):(p=s.top-480-16,b="calc(100% - 8px)",g="translateX(-50%) rotate(225deg)"),t.style.alignItems="flex-start",t.style.justifyContent="flex-start",t.style.paddingTop="0",a.style.position="absolute",a.style.left=`${h}px`,a.style.top=`${p}px`,a.style.transform="scale(0.95)",a.style.width="auto",a.style.maxWidth="auto",r&&(r.style.display="block",r.style.top=b,r.style.left=s.left+s.width/2-h+"px",r.style.transform=g)}attachChangesModalEventListeners(e){e.querySelectorAll(".werelease-modal-close").forEach(e=>{e.addEventListener("click",()=>this.closeModal())});const n=e.querySelector(".werelease-submit-feedback");n&&n.addEventListener("click",()=>{this.handleChangesModalFeedback(e)})}attachFeedbackEventListeners(e,n,t){if(n){e.querySelectorAll(".werelease-modal-close").forEach(e=>{e.addEventListener("click",()=>{this.closeModal()})})}if("emoji"===t||"both"===t){e.querySelectorAll(".werelease-emoji-reaction").forEach(e=>{e.addEventListener("click",n=>{n.stopPropagation();const t=e.getAttribute("data-emoji");t&&this.handleModalEmojiReaction(t)})})}const a=e.querySelector(".werelease-submit-feedback");a&&a.addEventListener("click",e=>{e.stopPropagation(),this.submitFeedback(t)}),n&&e.addEventListener("click",n=>{n.target===e&&this.closeModal()})}handleModalEmojiReaction(e){document.querySelectorAll(".werelease-emoji-btn").forEach(e=>e.classList.remove("selected"));const n=document.querySelector(`[data-emoji="${e}"]`);if(n){n.classList.add("selected");const e=n.getAttribute("data-rating");this.selectedRating=e?parseInt(e):null}}async submitFeedback(e){const n=document.querySelector("#werelease-feedback-comment"),t=n?.value||"";if(("emoji"===e||"both"===e)&&!this.selectedRating){return void document.querySelectorAll(".werelease-emoji-btn").forEach(e=>{e.classList.add("werelease-required"),setTimeout(()=>e.classList.remove("werelease-required"),1e3)})}if(("text"===e||"both"===e)&&!t.trim())return;const a=document.querySelector(".werelease-feedback-footer"),r=document.querySelector(".werelease-feedback-loader"),s=document.querySelector(".werelease-feedback-success");if(!a||!r||!s)return;let o;if(a.classList.add("loading"),r.style.display="flex",o="emoji"===e?{feedback:{type:"emoji",emojiRating:this.selectedRating,textComment:void 0,source:"modal"},meta:{}}:"text"===e?{feedback:{type:"text",emojiRating:void 0,textComment:t,source:"modal"},meta:{}}:{feedback:{type:"both",emojiRating:this.selectedRating,textComment:t||void 0,source:"modal"},meta:{}},this.feedbackSubmissionCallback)try{await this.feedbackSubmissionCallback(o),r.style.display="none",s.style.display="flex",a.classList.remove("loading"),a.classList.add("success"),this.selectedRating=null,setTimeout(()=>{this.closeModal()},2e3)}catch{r.style.display="none",a.classList.remove("loading"),this.showErrorMessage(),setTimeout(()=>{this.closeModal()},1500)}else r.style.display="none",s.style.display="flex",a.classList.remove("loading"),a.classList.add("success"),this.selectedRating=null,setTimeout(()=>{this.closeModal()},2e3)}async handleChangesModalFeedback(e){const n=e.querySelector(".werelease-action-bar"),t=e.querySelector(".werelease-feedback-loader"),a=e.querySelector(".werelease-feedback-success");if(!n||!t||!a)return;n.classList.add("loading"),t.style.display="flex";const r={feedback:{type:"emoji",emojiRating:5,textComment:void 0,source:"banner"},meta:{}};if(this.feedbackSubmissionCallback)try{await this.feedbackSubmissionCallback(r),t.style.display="none",a.style.display="flex",n.classList.remove("loading"),n.classList.add("success"),setTimeout(()=>{this.closeModal()},2e3)}catch{t.style.display="none",n.classList.remove("loading"),setTimeout(()=>{this.closeModal()},500)}else t.style.display="none",a.style.display="flex",n.classList.remove("loading"),n.classList.add("success"),setTimeout(()=>{this.closeModal()},2e3)}showSuccessMessage(){const e=document.querySelector(".werelease-feedback-body");e&&(e.innerHTML='\n        <div class="werelease-success-message">\n          ✅ Thank you for your feedback!\n        </div>\n      ')}showErrorMessage(){const e=document.querySelector(".werelease-feedback-body");e&&(e.innerHTML='\n        <div class="werelease-error-message">\n          ❌ Something went wrong. Please try again.\n        </div>\n      ')}getEmojiRating(e){return{"👍":5,"❤️":5,"😊":4,"😐":3,"😕":2,"👎":1}[e]||3}renderThankYouTemplate(){return'\n      <div class="werelease-feedback-overlay werelease-modal-close">\n        <div class="werelease-feedback-content" onclick="event.stopPropagation()">\n          <div class="werelease-feedback-header">\n            <h2>🙏 Thank You!</h2>\n            <button class="werelease-feedback-close werelease-modal-close">×</button>\n          </div>\n          \n          <div class="werelease-feedback-body">\n            <div class="werelease-success-message">\n              <p>Thank you for your feedback! We\'ve already received your input for this update.</p>\n              <p>Your feedback helps us improve and we truly appreciate it.</p>\n            </div>\n          </div>\n          \n          <div class="werelease-feedback-footer">\n            <button class="werelease-btn-primary werelease-modal-close">Close</button>\n          </div>\n        </div>\n      </div>\n    '}attachThankYouEventListeners(e){e.querySelectorAll(".werelease-modal-close").forEach(e=>{e.addEventListener("click",()=>{this.closeModal()})}),e.addEventListener("click",n=>{n.target===e&&this.closeModal()})}constructor(){this.currentModal=null,this.selectedRating=null}}class f{async init(e){try{if(this.storageService.isBannerDismissed()){const e=this.storageService.getItem(s.BANNER_DISMISSED);if(!e)return;const t=new Date(parseInt(e,10)),a=new Date;if(n.differenceInHours(a,t)<24)throw new Error("Banner dismissed by user.");this.storageService.removeItem(s.BANNER_DISMISSED)}this.projectId=e.projectId,this.user=e.user||null,this.target=e.target||"body",this.options={...o,...e.options,styles:e.options?.styles||o.styles},this.anonymousId=c(),this.user&&await this.apiService.identifyUser(this.projectId,this.anonymousId,this.user);try{const e=await this.apiService.init(this.projectId,this.anonymousId);e?(this.projectData=e.project,this.theme=this.projectData.uiVariant||"basic"):this.theme="basic"}catch{console.warn("[WeRelease] Could not fetch project data, using default theme"),this.theme="basic"}try{const e=await this.apiService.fetchLatest(this.projectId);e&&e.length>0?this.changelogData=e[0]:this.changelogData=i}catch{console.warn("[WeRelease] Could not fetch changelog data, using default"),this.changelogData=i}this.checkFeedbackStatus()}catch(e){throw console.error("[WeRelease] Error during initialization:",e),e}}showBanner(){if(!this.projectId)return void console.error("[WeRelease] SDK not initialized. Call init() first.");const e={projectId:this.projectId,target:this.target,options:this.options,theme:this.theme,changelogData:this.changelogData,onBannerClick:this.handleBannerClick.bind(this),onViewChanges:this.handleViewChangesClick.bind(this),onDismiss:this.handleDismissClick.bind(this)};this.bannerManager.render(e)}askForFeedback(e){try{if(this.checkFeedbackStatus(),this.hasFeedbackSubmitted)this.modalManager.showThankYouModal();else{const n=void 0!==e?.dismiss?e.dismiss:this.options?.dismissFeedbackModal??!0,t=e?.type||this.options?.feedbackType||"both";this.modalManager.showFeedbackModal(n,t)}}catch(e){console.error("[WeRelease] Error in askForFeedback:",e)}}async identify(e){if(!this.projectId||!this.anonymousId)throw new Error("WeRelease not properly initialized");this.user=e,await this.apiService.identifyUser(this.projectId,this.anonymousId,e)}hasFeedbackBeenSubmitted(){return this.checkFeedbackStatus(),this.hasFeedbackSubmitted}resetFeedbackStatus(){if(!this.projectId)return!1;const e=`${s.FEEDBACK_SUBMITTED}_${this.projectId}_${this.changelogData?.id||"general"}`;return this.storageService.setItem(e,""),this.hasFeedbackSubmitted=!1,!0}captureFeedback(){this.modalManager.setFeedbackCallback(e=>{this.apiService.submitFeedback(e)})}getProjectId(){return this.projectId}getUser(){return this.user}getTarget(){return this.target}getOptions(){return{...this.options}}checkFeedbackStatus(){if(!this.projectId)return!1;const e=`${s.FEEDBACK_SUBMITTED}_${this.projectId}_${this.changelogData?.id||"general"}`,n=this.storageService.getItem(e);return this.hasFeedbackSubmitted="submitted"===n,this.hasFeedbackSubmitted}handleBannerClick(e){this.options.onBannerClick&&this.options.onBannerClick(e,{projectId:this.projectId,releaseDate:this.changelogData?.releaseDate})}handleViewChangesClick(){const e=document.querySelector("#werelease-banner"),n=e?e.querySelector(".werelease-view-changes"):void 0;this.modalManager.showChangesModal(n,this.changelogData)}handleDismissClick(){if(this.projectId){this.storageService.setBannerDismissed();const e=document.querySelector("#werelease-banner");e&&e.parentNode&&e.parentNode.removeChild(e)}}constructor(){this.user=null,this.target="body",this.options={...o},this.changelogData=i,this.projectData=null,this.theme="basic",this.hasFeedbackSubmitted=!1,this.apiService=new l,this.storageService=new d,this.bannerManager=new g,this.modalManager=new u,this.modalManager.setFeedbackCallback(async e=>{if(!this.projectId||!this.anonymousId)throw new Error("WeRelease not properly initialized");const n={projectId:this.projectId,anonymousId:this.anonymousId,changeLogId:this.changelogData?.id||0,feedback:{type:e.feedback?.type||"both",emojiRating:e.feedback?.emojiRating,textComment:e.feedback?.textComment,source:e.feedback?.source||"modal"},meta:e.meta||{}};try{await this.apiService.submitFeedback(n),this.hasFeedbackSubmitted=!0;const e=`${s.FEEDBACK_SUBMITTED}_${this.projectId}_${this.changelogData?.id||"general"}`;this.storageService.setItem(e,"submitted")}catch(e){throw console.error("[WeRelease] Failed to submit feedback:",e),e}})}}class w{static async init(e){const n=new f;return await n.init(e).catch(e=>{console.error("[WeRelease] Initialization failed:",e)}),n}}"undefined"!=typeof window&&(window.WeRelease=w),e.WeRelease=w}(this.WeRelease=this.WeRelease||{},dateFns,axios);
